(function(e){function t(t){for(var r,s,a=t[0],l=t[1],c=t[2],F=0,u=[];F<a.length;F++)s=a[F],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/L-systems/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},4620:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),o=function(){var e=this,t=e._self._c;return t("div",{class:{"light-theme":e.isLightTheme},attrs:{id:"app"}},[t("button",{staticClass:"sidebar-toggle",class:{"sidebar-open":e.sidebarOpen},on:{click:e.toggleSidebar}},[t("span",{staticClass:"toggle-icon"},[e._v(e._s(e.sidebarOpen?"×":"☰"))])]),t("button",{staticClass:"theme-toggle",attrs:{title:e.isLightTheme?"Switch to dark theme":"Switch to light theme"},on:{click:e.toggleTheme}},[t("span",{staticClass:"theme-icon"},[e._v(e._s(e.isLightTheme?"☀":"☾"))])]),t("div",{staticClass:"sidebar",class:{"sidebar-open":e.sidebarOpen}},[t("div",{staticClass:"editor-container"},[t("div",{staticClass:"section"},[t("div",{staticClass:"title"},[e._v(" L-Systems "),e._m(0),t("a",{staticClass:"github-link",attrs:{href:"https://github.com/ZanSara/L-systems",target:"_blank",title:"View source on GitHub"}},[t("svg",{attrs:{viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor"}},[t("path",{attrs:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})])])]),e.syntaxHelpVisible?t("div",{staticClass:"help"},[e._v(" L-Systems are described very well on "),t("a",{attrs:{href:"http://paulbourke.net/fractals/lsys/",target:"_blank"}},[e._v("Paul Bourke's website")]),e._v(". "),e._m(1)]):e._e(),t("div",{staticClass:"editor-wrapper"},[t("a",{staticClass:"syntax-help-button",class:{"syntax-visible":e.syntaxHelpVisible},attrs:{href:"#",title:"click to learn more about syntax"},on:{click:function(t){t.preventDefault(),e.syntaxHelpVisible=!e.syntaxHelpVisible}}},[e._v("?")]),e.codeEditorModel?t("code-editor",{staticClass:"code-editor-container",attrs:{model:e.codeEditorModel}}):e._e()],1),t("div",{staticClass:"view-controls"},[t("div",{staticClass:"rotation-control"},[t("label",{attrs:{for:"line-width"}},[e._v("Line Width:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.lineWidth,expression:"lineWidth",modifiers:{number:!0}}],attrs:{id:"line-width",type:"range",min:"1",max:"30",step:"1"},domProps:{value:e.lineWidth},on:{input:e.updateLineWidth,__r:function(t){e.lineWidth=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),t("span",{staticClass:"rotation-value"},[e._v(e._s(e.lineWidth)+"px")])]),t("div",{staticClass:"grid-toggle"},[t("label",{attrs:{for:"show-grid"}},[e._v("Show Grid:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showGrid,expression:"showGrid"}],staticClass:"grid-checkbox",attrs:{id:"show-grid",type:"checkbox"},domProps:{checked:Array.isArray(e.showGrid)?e._i(e.showGrid,null)>-1:e.showGrid},on:{change:[function(t){var n=e.showGrid,r=t.target,o=!!r.checked;if(Array.isArray(n)){var i=null,s=e._i(n,i);r.checked?s<0&&(e.showGrid=n.concat([i])):s>-1&&(e.showGrid=n.slice(0,s).concat(n.slice(s+1)))}else e.showGrid=o},e.toggleGrid]}}),t("span",{staticClass:"toggle-switch",class:{active:e.showGrid},on:{click:function(t){e.showGrid=!e.showGrid,e.toggleGrid()}}})]),t("div",{staticClass:"rotation-control"},[t("label",{attrs:{for:"rotation"}},[e._v("Rotation:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.rotation,expression:"rotation",modifiers:{number:!0}}],attrs:{id:"rotation",type:"range",min:"0",max:"360",step:"1"},domProps:{value:e.rotation},on:{input:e.updateRotation,__r:function(t){e.rotation=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),t("span",{staticClass:"rotation-value"},[e._v(e._s(e.rotation)+"°")])])]),t("div",{staticClass:"controls"},[t("a",{staticClass:"album-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.pickFromAlbum.apply(null,arguments)}}},[e._v("Pick from Examples")]),t("a",{staticClass:"randomize-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.trueRandomize.apply(null,arguments)}}},[e._v("Random Values")]),t("a",{staticClass:"stop-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.stopGeneration.apply(null,arguments)}}},[e._v("Stop Generation")]),t("a",{staticClass:"save-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toSVGFile.apply(null,arguments)}}},[e._v("Save as SVG")])]),t("div",{staticClass:"section examples-section"},[t("div",{staticClass:"title"},[e._v("Examples")]),t("div",{staticClass:"examples-list"},e._l(e.examples,(function(n,r){return t("a",{key:r,staticClass:"example-item",class:{active:e.currentExampleIndex===n.index},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loadExample(n.index)}}},[e._v(" "+e._s(n.name)+" ")])})),0)])])])]),e.showSelectionMask?t("div",{staticClass:"selection-overlay"},[t("div",{staticClass:"selection-mask",style:{left:e.selectionRect.left+"px",top:e.selectionRect.top+"px",width:e.selectionRect.width+"px",height:e.selectionRect.height+"px"},on:{mousedown:e.startDrag}},[t("div",{staticClass:"selection-border"}),t("div",{staticClass:"resize-handle nw",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("nw",t)}}}),t("div",{staticClass:"resize-handle ne",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("ne",t)}}}),t("div",{staticClass:"resize-handle sw",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("sw",t)}}}),t("div",{staticClass:"resize-handle se",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("se",t)}}}),t("div",{staticClass:"resize-handle n",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("n",t)}}}),t("div",{staticClass:"resize-handle s",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("s",t)}}}),t("div",{staticClass:"resize-handle w",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("w",t)}}}),t("div",{staticClass:"resize-handle e",on:{mousedown:function(t){return t.stopPropagation(),e.startResize("e",t)}}})]),t("div",{staticClass:"selection-controls"},[t("button",{staticClass:"selection-confirm-btn",on:{click:e.confirmSelection}},[e._v(" Confirm Selection ")]),t("button",{staticClass:"selection-cancel-btn",on:{click:e.cancelSelection}},[e._v(" Cancel ")])])]):e._e(),e.showSaveModal?t("div",{staticClass:"modal-overlay",on:{click:function(t){e.showSaveModal=!1}}},[t("div",{staticClass:"modal-content",on:{click:function(e){e.stopPropagation()}}},[t("h3",[e._v("Save as SVG")]),t("p",[e._v("Choose which theme version(s) to save:")]),t("div",{staticClass:"modal-buttons"},[t("button",{staticClass:"modal-btn light-btn",on:{click:function(t){return e.saveSVGVersion("light")}}},[e._v(" ☀ Light Theme "),t("span",{staticClass:"filename"},[e._v("l-system-light.svg")])]),t("button",{staticClass:"modal-btn dark-btn",on:{click:function(t){return e.saveSVGVersion("dark")}}},[e._v(" ☾ Dark Theme "),t("span",{staticClass:"filename"},[e._v("l-system-dark.svg")])]),t("button",{staticClass:"modal-btn both-btn",on:{click:function(t){return e.saveSVGVersion("both")}}},[e._v(" ☀☾ Both Themes "),t("span",{staticClass:"filename"},[e._v("2 files")])])]),t("button",{staticClass:"modal-cancel",on:{click:function(t){e.showSaveModal=!1}}},[e._v("Cancel")])])]):e._e()])},i=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"https://zansara.dev"}},[t("small",[e._v(" by Sara Zan ")])])},function(){var e=this,t=e._self._c;return t("p",[e._v("The following is the list of available sections: "),t("ul",[t("li",[t("strong",[e._v("axiom")]),e._v(": initial state of the system")]),t("li",[t("strong",[e._v("rules")]),e._v(": list of rewrite rules that are applied on each iteration")]),t("li",[t("strong",[e._v("depth")]),e._v(": how deep we are allowed to go recursively")]),t("li",[t("strong",[e._v("angle")]),e._v(": if specified, this argument governs rotation angle. Can be overridden with "),t("strong",[e._v("actions")])]),t("li",[t("strong",[e._v("actions")]),e._v(": list of graphic commands that are triggered by a matching character in the evolved system. The following is the list of available actions: "),t("ul",[t("li",[t("strong",[e._v("draw(x)")]),e._v(" draw "),t("code",[e._v("x")]),e._v(" units in current direction")]),t("li",[t("strong",[e._v("move(x)")]),e._v(" move "),t("code",[e._v("x")]),e._v(" units in current direction without drawing")]),t("li",[t("strong",[e._v("rotate(deg)")]),e._v(" rotate current direction "),t("code",[e._v("deg")]),e._v(" degrees around Z axis")]),t("li",[t("strong",[e._v("rotateX(deg)")]),e._v(" rotate current direction "),t("code",[e._v("deg")]),e._v(" degrees around X axis")]),t("li",[t("strong",[e._v("rotateY(deg)")]),e._v(" rotate current direction "),t("code",[e._v("deg")]),e._v(" degrees around Y axis")]),t("li",[t("strong",[e._v("push()")]),e._v(" saves current render state onto stack")]),t("li",[t("strong",[e._v("pop()")]),e._v(" restores previously saved render state")]),t("li",[t("strong",[e._v("setColor(color)")]),e._v(" set the current color value, '#ffa500' or 'orange'.")]),t("li",[t("strong",[e._v("swapAngle()")]),e._v(" swaps the meaning of `+` and `-`.")])]),t("p",[e._v("By default the following actions are added automatically:")]),t("pre",[t("code",[e._v("actions:\n  F => draw(10)\n  f => move(10)\n  + => rotate(60)\n  - => rotate(-60)\n  & => swapAngle()\n  [ => push()\n  ] => pop()\n")])])]),t("li",[t("strong",[e._v("width")]),e._v(": width in pixels of the drawn line")]),t("li",[t("strong",[e._v("color")]),e._v(": color of the line. Accepts names and hex. E.g. "),t("code",[e._v("blue")]),e._v(", works the same as "),t("code",[e._v("#0000ff")])]),t("li",[t("strong",[e._v("stepsPerFrame")]),e._v(": how many steps we are allowed to render per single frame. If set to "),t("code",[e._v("-1")]),e._v(" the scene is rendered immediately. This could be dangerous on deep systems, as the entire system traversal may exhaust the browser's resources. ")]),t("li",[t("strong",[e._v("direction")]),e._v(": three numbers separated by coma "),t("code",[e._v("x, y, z")]),e._v(" that set initial direction")]),t("li",[t("strong",[e._v("position")]),e._v(": three numbers separated by coma "),t("code",[e._v("x, y, z")]),e._v(" that set initial position")])])])}],s=n("9aeb");n("d9e2");class a extends s["b"]{constructor(e,t={}){let n=Object(s["f"])({gl:e,vertex:"\n    uniform mat4 modelViewProjection;\n    uniform float width;\n    uniform vec2 resolution;\n\n    attribute vec4 color;\n    attribute vec3 from, to;\n    attribute vec2 point;\n\n    varying vec4 vColor;\n    varying vec2 vPoint;\n\n    void main() {\n      vec4 clip0 = modelViewProjection * vec4(from, 1.0);\n      vec4 clip1 = modelViewProjection * vec4(to, 1.0);\n\n      vec2 screen0 = resolution * (0.5 * clip0.xy/clip0.w + 0.5);\n      vec2 screen1 = resolution * (0.5 * clip1.xy/clip1.w + 0.5);\n\n      vec2 xBasis = normalize(screen1 - screen0);\n      vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n\n      // Offset the original points:\n      vec2 pt0 = screen0 + width * point.x * yBasis;\n      vec2 pt1 = screen1 + width * point.x * yBasis;\n\n      vec2 pt = mix(pt0, pt1, point.y);\n      vec4 clip = mix(clip0, clip1, point.y);\n\n      gl_Position = vec4(clip.w * (2.0 * pt/resolution - 1.0), clip.z, clip.w);\n      vColor = color.abgr; // mix(.abgr, aToColor.abgr, aPosition.y);\n    }",fragment:"\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor;\n    }",attributes:{color:new s["a"]},instanced:{point:new s["c"]([-.5,0,-.5,1,.5,1,-.5,0,.5,1,.5,0])}});super(n),this.width=t.width||2,this.multiColorSegment=!0}draw(e,t){this.uniforms||(this.uniforms={modelViewProjection:this.modelViewProjection,width:this.width,resolution:[t.width,t.height]}),this.uniforms.resolution[0]=t.width,this.uniforms.resolution[1]=t.height,this.program.draw(this.uniforms)}forEachLine(e){let t=this.program.getCount();for(let n=0;n<t;++n){let t=this.program.get(n),r={x:t.from[0],y:t.from[1],z:t.from[2],color:t.color},o={x:t.to[0],y:t.to[1],z:t.to[2],color:t.color};e(r,o)}}getLineColor(e){let t=this.program.getCount(),n=e?e.color:t>0?this.program.get(0).color:4294967295;return[(n>>24&255)/255,(n>>16&255)/255,(n>>8&255)/255,(n>>0&255)/255]}}var l=n("66cb"),c=n.n(l);class d{constructor(e,t={}){this.position=t.position||[0,0,0],F("position",this.position),this.direction=t.direction||[1,0,0],u(this.direction),F("direction",this.direction),this.lines=new a(e.getGL(),{capacity:1024,width:t.width||2}),this.scene=e,this.color=t.color||4294967295,this.scene.appendChild(this.lines),this.stack=[],this.invertZYAngle=!1}push(){this.stack.push({color:this.color,direction:[this.direction[0],this.direction[1],this.direction[2]],position:[this.position[0],this.position[1],this.position[2]]})}pop(){let e=this.stack.pop();this.color=e.color,this.direction=e.direction,this.position=e.position}dispose(){this.scene.removeChild(this.lines)}move(e){let t=this.position,n=this.direction,r=t[0]+e*n[0],o=t[1]+e*n[1],i=t[2]+e*n[2];t[0]=r,t[1]=o,t[2]=i}draw(e){let t=this.position,n=this.direction,r=t[0]+e*n[0],o=t[1]+e*n[1],i=t[2]+e*n[2];this.lines.add({from:t,to:[r,o,i],color:this.color}),t[0]=r,t[1]=o,t[2]=i,this.scene.renderFrame()}setColor(e){if(void 0===e)throw new Error("setColor() expects color value, got undefined");const t=c()("number"===typeof e?Object.values(c.a.names)[e]:e).toRgb();this.color=t.r<<24|t.g<<16|t.b<<8|255*t.a|0}rotateZ(e){this.invertZYAngle&&(e*=-1);let t=Math.PI*e/180,n=this.direction,r=Math.cos(t)*n[0]-Math.sin(t)*n[1],o=Math.sin(t)*n[0]+Math.cos(t)*n[1];n[0]=r,n[1]=o}rotateY(e){this.invertZYAngle&&(e*=-1);let t=Math.PI*e/180,n=this.direction,r=Math.cos(t)*n[0]-Math.sin(t)*n[2],o=Math.sin(t)*n[0]+Math.cos(t)*n[2];n[0]=r,n[2]=o}rotateX(e){let t=Math.PI*e/180,n=this.direction,r=Math.cos(t)*n[1]-Math.sin(t)*n[2],o=Math.sin(t)*n[1]+Math.cos(t)*n[2];n[1]=r,n[2]=o}swapAngle(){this.invertZYAngle=!this.invertZYAngle}}function F(e,t){if(!Array.isArray(t))throw new Error("Array is expected for `"+e+"`");if(2===t.length&&t.push(0),3!==t.length)throw new Error("Array `"+e+"` should have 2 or 3 coordinates, got "+t.length)}function u(e){let t=Math.hypot(e[0],e[1],e[2]);e[0]/=t,e[1]/=t,e[2]/=t}const h=1e6;class m{constructor(e,t){v(t),this.rules=t.rules,this.actions=p(t,this),this.turtle=new d(e,t),this.stepsPerFrame=t.stepsPerFrame||42,this.drawQueue=[],this.lastDrawnIndex=-1;const n=Number.isFinite(t.depth)?t.depth:5;let r=t.start;if(void 0===r&&(r=Object.keys(this.rules)[0]),void 0===r)throw new Error("System does not have neither rewrite rules nor start state");this.start=r,this.depth=n,this.simulate(),this.iterator=this.renderIterator()}dispose(){this.turtle.dispose()}frame(){let e,t=0;do{e=this.iterator.next()}while(!e.done&&t++<this.stepsPerFrame);return!e.done}simulate(){let e=this.start,t=0;while(t<this.depth&&e.length<h)e=this.iterateRules(e),t+=1;this.production=e,this.complete=e.length<h}iterateRules(e){let t=[];for(let n of e){let e=this.rules[n];void 0!==e?t.push(e):t.push(n)}return t.join("")}*renderIterator(){for(let e of this.production)this.actions[e]&&(this.stepsPerFrame<0?yield*this.actions[e]():yield this.actions[e]())}}function p(e,t){let n={},r=Number.isFinite(e.angle)?e.angle:60,o={F:{name:"draw",args:[]},f:{name:"move",args:[]},"+":{name:"rotate",args:[r]},"-":{name:"rotate",args:[-r]},"&":{name:"swapAngle",args:[-r]},"[":{name:"push",args:[]},"]":{name:"pop",args:[]},...e.actions};return Object.keys(o).forEach(e=>{let r=o[e],i=f(r,t);if(!i)throw new Error("Turtle does not know how to do '"+r+"'");n[e]=i}),n}function f(e,t){if(0===e.name.indexOf("rotate")){let n=e.args[0];if(!Number.isFinite(n))throw new Error("`rotate() needs one float argument");switch(e.name){case"rotateX":return function(){t.turtle.rotateX(n)};case"rotateY":return function(){t.turtle.rotateY(n)}}return function(){t.turtle.rotateZ(n)}}if("draw"===e.name){let n=g(e.args[0],"draw");return function(){t.turtle.draw(n)}}if(e.name.match(/chcolor|setColor/i)){let n=e.args[0];return function(){t.turtle.setColor(n)}}if("push"===e.name)return function(){t.turtle.push()};if("pop"===e.name)return function(){t.turtle.pop()};if("move"===e.name){let n=g(e.args[0],"move");return function(){t.turtle.move(n)}}return e.name.match(/swapAngle/i)?function(){t.turtle.swapAngle()}:void 0}function g(e,t){let n=10;if(void 0!==e&&(n=e,!Number.isFinite(n)))throw new Error(t+"(l) expects `l` to be a float number. Got: "+e);return n}function v(e){if(void 0!==e.angle&&(e.angle=Number.parseFloat(e.angle)),void 0!==e.width&&(e.width=Number.parseFloat(e.width)),void 0!==e.depth&&(e.depth=Number.parseFloat(e.depth)),void 0!==e.color&&"number"!==typeof e.color){let t=c()(e.color).toRgb();e.color=t.r<<24|t.g<<16|t.b<<8|255*t.a|0}}function w(e){let t=Object(s["e"])(e,{camera:{allowRotation:!1,allowPinchRotation:!1}}),n=null;t.setClearColor(0,0,0,1);let r=40,o={left:-r,top:-r,right:r,bottom:r};t.setViewBox(o);let i,a=!1,l=[],c=requestAnimationFrame(w),d=4294967295,F=8,u="dark",h=1145324799;return{dispose:C,setSystem:g,saveToSVG:p,isComplete:v,stop:y,setTheme:x,setLineWidth:X,setGridVisible:k,getScene:()=>t};function p(e,n){let r=null;n&&(r={...o},o=n,t.setViewBox(n),t.renderFrame());let i={open(){return"\x3c!-- Generator: https://zansara.dev/L-system --\x3e"},scale:5},a=Object(s["h"])(t,i);r&&(o=r,t.setViewBox(r),t.renderFrame()),a=a.replace(/<path /g,'<path vector-effect="non-scaling-stroke" stroke-linejoin="miter" stroke-linecap="square" ');let l=new Blob([a],{type:"image/svg+xml"}),c=window.URL.createObjectURL(l);setTimeout(()=>{let t=document.createElement("a");t.href=c,t.download=e,t.click(),f(c)},30)}function f(e){setTimeout(()=>{window.URL.revokeObjectURL(e)},45e3)}function g(e){cancelAnimationFrame(c),i?l.forEach(e=>i.push(e)):i=l,Array.isArray(e)||(e=[e]),l=[],e.forEach(e=>{void 0===e.color&&(e.color=d),void 0===e.width&&(e.width=F),l.push(new m(t,e))}),c=requestAnimationFrame(w)}function v(){return l.every(e=>e.complete)}function w(){a=!1,l.forEach(b),a&&(c=requestAnimationFrame(w)),i&&(i.forEach(e=>e.dispose()),i=null)}function b(e){a|=e.frame()}function y(){cancelAnimationFrame(c),a=!1}function x(e){u=e?"light":"dark",e?(t.setClearColor(1,1,1,1),d=255,h=2290649343):(t.setClearColor(0,0,0,1),d=4294967295,h=1145324799),n&&(n.dispose(),n=Object(s["d"])(t,{lineColor:h,showCursor:!1})),t.renderFrame()}function X(e){F=e}function k(e){e&&!n?n=Object(s["d"])(t,{lineColor:h,showCursor:!1}):!e&&n&&(n.dispose(),n=null),t.renderFrame()}function C(){cancelAnimationFrame(c),t.dispose()}}const b=/:|->|=>|=|→/,y=/rules|production rules/i,x=/actions/i,X=/[ \t]/g,k=/angle|depth|width|stepsPerFrame/i,C=/direction|position/i,Y=/[[\]()]/;class _{constructor(e,t,n){this.parent=t,this.addTo=e,this.valueParser=n||(e=>e)}process(e){let t=e.split(b);if(1===t.length)throw new Error("Expected `_ => value`, found "+e);let n=t[0].trim();if(1!==n.length)return this.parent.process(e);let r=t.slice(1).join("").replace(X,"");return this.addTo[n]=this.valueParser(r),this}}function M(e){let t=e.match(/(\w+?)\s*\((.+?)?\)/);if(!t)throw new Error("Expected `action()` call, got: "+e);let n,r=t[1];return n=t[2]?t[2].split(",").map(e=>{let t=S(e);return void 0!==t?t:Number.parseFloat(e.trim())}):[],{name:r,args:n}}function S(e){let t=e&&e.match(/\s*(?:'(.*?)'|"(.*?)")\s*/);if(t)return t[1]||t[2]}class E{constructor(e){this.addTo=e}process(e){let t=e.split(b);if(1===t.length)throw new Error("Expected `key: value`, found "+e);let n=t[0].trim(),r=t.slice(1).join("").trim();if(n.match(y))return this.addTo.rules={},new _(this.addTo.rules,this);if(n.match(x))return this.addTo.actions={},new _(this.addTo.actions,this,M);if(n.match(k)){let e=Number.parseFloat(r);if(!Number.isFinite(e))throw new Error("Expected a number value for `"+n+"`");return this.addTo[n]=e,this}return n.match(C)?(this.addTo[n]=P(r,n),this):(this.addTo[n]=r,this)}}function P(e,t){return e.replace(Y,"").replace(X,"").split(",").map((n,r)=>{if(!n)throw new Error("Missing vector component at position "+r+" for `"+t+"`");let o=Number.parseFloat(n);if(!Number.isFinite(o))throw new Error("Vectors are expected to be numbers. Found `"+n+"` in `"+e+"`");return o})}function T(e){let t=e.split("\n"),n=new E({});t.forEach((e,t)=>{if(e=e.trim(),""!==e&&!e.startsWith("//"))try{n=n.process(e)}catch(r){throw new Error(r.message+"\n\n at line "+t)}});while(n.parent)n=n.parent;return n.addTo}const R=n("9cf4");var j=R({code:L()},{useSearch:!0});let A=["// Dragon\naxiom: X\nrules: \n X => X+YF+\n Y => -FX-Y\n\ndepth: 10\nangle: 90","// William McWorters: Terdragon\naxiom: F\nrules: \n F => F+F-F\n\ndepth: 8\nangle: 120",'// William McWorters: Pentl\naxiom: F-F-F-F-F\nrules: \n  F => cF-F-F++dF+F-F \n\ndepth: 4\nangle: 72\nactions:\n  c => setColor("mediumpurple")\n  d => setColor("violet") ','// William McWorters: Pentant\naxiom: X-X-X-X-X\nrules: \n  F => \n  X => dFX-FX-FX+FY+FY+FX-FX\n  Y => cFY+FY-FX-FX-FY+FY+FY\n\ndepth: 3\nangle: 72\nactions:\n  c => setColor("goldenrod")\n  d => setColor("gold") ','// William McWorter: Sierπnski Carpet \naxiom: F\nrules: \n F => cF+F-F-F-f+dF+F+F-F\n f => fff\n\nangle: 90\ndepth: 4\nactions:\n  c => setColor("goldenrod")\n  d => setColor("gold") ',"// Hexagonal Gosper\naxiom: X\nrules:\n X => X+YF++YF-FX--FXFX-YF+\n Y => -FX+YFYF++YF+FX--FX-Y \n\nangle: 60","// Peano curve\naxiom: X\nrules: \n X => XFYFX-F-YFXFY+F+XFYFX\n Y => YFXFY+F+XFYFX-F-YFXFY\n\ndepth:4\nangle: 90","// Gary Teachout: Pean-c\naxiom: FX\nrules:\n F => \n X =>  FX-FY-FX+FY+FX+FY+FX+FY+FX-FY-FX-FY-FX-FY-FX+FY+FX\n Y => FY\n\ndepth: 3\nangle: 45","// Square Sierpinski\naxiom: F+XF+F+XF\nrules: \n X => XF-F+F-XF+F+XF-F+F-X\n\ndepth: 4\nangle: 90 ","// Tree\naxiom: X\nrules: \n F => FF\n X => F-[[X]+X]+F[+FX]-X\n\ndirection: [0, 1, 0]\nangle: 22.5","// Tree (color)\naxiom: X\nrules: \n F => FF\n X => F-[[X]+X]+cF[+dFX]-X\n\ncolor:brown\ndirection: [0, 1, 0]\nangle: 22.5a\nactions:\n  c => setColor('green')\n  d => setColor('lightgreen')","// P. Bourke: Bush\naxiom: Y\nrules: \n  X => X[-FFF]c[+FFF]FX\n  Y => dYFXe[+Y][-Y]\n\ncolor: brown\ndirection: [0, 1, 0]\nangle: 22.5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('brown')"," // P. Bourke: Grains\naxiom: Y\nrules: \n  X => dX[-F+FF]cg[+F-FF]dFX\n  Y => eYFX[+Y][-Y]\n\ndepth:5\ndirection: [0, 1, 0]\nangle: 27\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('lightgreen')\n  g => rotate(0.3)"," // P. Bourke: Grains 2\naxiom: Y\nrules: \n  X => cX[-FF-F]g[+FF+F]dFX\n  Y => eYFX[+Y][-Y]XFY\n\ndepth:4\ndirection: [0, 1, 0]\nangle: 27\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('gold')\n  g => rotate(0.2)","// P. Bourke: Bush\naxiom: F\nrules: \n  F => FF+[c+F-F-F]-[-F+F+dF]\n\ncolor: green\ndirection: [0, 1, 0]\nangle: 21\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')","// P. Bourke: Pentaplexy\naxiom: F++F++F++F++F\nrules: \n  F => cF++F++F+++++dF-F++F\n\ndepth:3\nangle: 36\nactions:\n  c => setColor('mediumpurple')\n  d => setColor('violet')","// Poetasters Shrub\naxiom: F\nrules: \n F => Fe[+cFF]Fd[-FF]cF\n\ncolor:brown\ndirection: [0, 1, 0]\nangle: 322\ndepth: 4\nactions:\n  c => setColor('green')\n  d => setColor('lightgreen')\n  e => setColor('brown')","// Poetasters Weed\naxiom: F\nrules:\n  F -> F-[XY]+[XY]F+[XY]-[XY]\n  X -> +dFY\n  Y -> -cFX\n\ncolor: brown\ndirection: [0, 1, 0.5]\nangle: 22.5\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')","// Unlikely Bush\naxiom: F\nrules: \n  F => eF[+cFF][-FF]cF[-F]d[+F]F\n\ncolor: brown\ndirection: [0, 1, 0]\nangle: 330\ndepth:3\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('brown')","// Weed\naxiom: F\nrules:\n  F -> FF-[XY]+[XY]\n  X -> +cFY\n  Y -> -dFX\n\ncolor: brown\ndirection: [0, 1, 1]\nangle: 22.5\nactions:\n  c => setColor('green')\n  d => setColor('lime')","// Saupe\naxiom: VZFFF\nrules:\n  V -> [+++W][---W]YV\n  W -> +X[-W]Z\n  X -> -W[+X]Z\n  Y -> YZ\n  Z -> [-FcFF][+FdFF]F\n\ncolor: green\ndepth:8\ndirection: [0, 1, 0]\nangle: 20\nactions:\n  c => setColor('lightgreen')\n  d => setColor('lime')",'// Poetaster\'s curly\naxiom: F+F-F+F\nrules: \n  F => eF-F-F++[cF+F-dF[GGG]][GGG]\n  G => c--g--g--g--g--g--g--g\n\ndepth: 3\nangle: 17\nwidth:2\ndirection: [-0.5,0.7,-0.5]\nactions:\n  c => setColor("palegreen")\n  d => setColor("violet") \n  e => setColor("green")\n  g => draw(2)',"// Aquatic Plant\naxiom: F\nrules:\n  F -> FFc[-F++F]d[+F--F]e++F--F\n\ncolor: brown\ndirection: [0, 1, 0.5]\nangle: 27\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')","// Aquatic Plant 2\naxiom: F\nrules:\n  F => FMNOMBxPNMyO\n  M => e[-F++F++]\n  N => d[+F--F--]\n  O => c++F--F\n  P => d--F++F\n\ncolor: brown\ndirection: [0, 1, -1]\nangle: 27\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-3)","// Poetasters Aquatic Plant\naxiom: F\nrules:\n  F -> FMNxQRyQR[O-O-O-O-0]\n  M => d[++FF+FF+]\n  N => d[--FF-FF-]\n  O => e[F-F-F++dF+F-F]\n  Q => c++F--F\n  R => c--F++F\n\ncolor: brown\ndirection: [0, 1, -1]\nangle: 17\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-1.5)","// Poetasters Sallow Thorn\naxiom: F\nrules:\n  F -> FMNxQRyQROP\n  M => d[++FF+FF+]\n  N => d[--FF-FF-]\n  O => e[-F++F++]\n  P => e[+F--F--]\n  Q => c++F--F\n  R => c--F++F\n\ncolor: brown\ndirection: [0.5, 1, -1]\nangle: 27\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-1.5)",'// Pean-c Flower\naxiom: FXhFXiFX\nrules:\n F => \n X =>  [FX-FY][-cFX-FY-FX][ZZ]-dFY-FX+FY+FX\n Y => FY\n Z => -cFX-FY-FX\n\ncolor: green\ndepth: 3\nangle: 340\nwidth: 2\ndirection: [1,1,1]\nactions:\n  c => setColor("violet")\n  d => setColor("lime")\n  h => rotate(5)\n  i => rotate(-3)',"// Poetasters Succulent 1\naxiom: A\nrules:\n A =>[FL]gAhg[FLA]\n F => cSF \n S => dFL\n L => c[F+F+F]fe[F-F-F]\n\ncolor:green\ndirection: [0, 1, 0.5]\nwidth: 4\nangle: 17\ndepth: 7\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('lightgreen')\n  g => rotate(4.5)\n  h => rotate(-3)","// Pyramids\naxiom: F++F++F+++F--F--F\nrules: \n  F =>  cFF++F++F++dFFF\n\ncolor: gold\nangle: 60\ndepth:3\nactions:\n  c => setColor('gold')\n  d => setColor('goldenrod')","// Hilbert Curve\naxiom: X\nrules: \n X => -YF+XFX+FY-\n Y => +XF-YFY-FX+\n\nangle: 90",'// Levey Curve\naxiom: F++F++F++F\nrules: \n  F => -dF++cF-\nangle: 45\ndepth: 12\nactions:\n  c => setColor("goldenrod")\n  d => setColor("gold")',"// Blocks\naxiom: F+F+F+F\nrules: \n F => F-f+FF-FF-FF-FFf-FFFF\n f => ffffff\n\nangle: 90\ndepth: 3 ",'// Aztec Blocks\naxiom: F-F-F-F\nrules: \n F => F-cf+FF-F-FF-Ff-FF+df-FF+F+FF+Ff+FFF\n f => ffffff\n\nangle: 90\ndepth: 2\nactions:\n  c => setColor("goldenrod")\n  d => setColor("gold")',"// Color Mosaic\naxiom: F+F+F+F\nrules: \n  F => dFF+F+cF+F+FF\n\ncolor: green\ndepth: 3\nangle: 90\nactions:\n  c => setColor('lime')\n  d => setColor('green')","// 3 Blocks\naxiom: F^^F^^F\nrules: \n F => F-fff^F^^F^^F&&fff-FFF\n f => fff\n\ndepth: 3\nactions:\n - => rotate(-90)\n ^ => rotate(60)\n & => rotate(-60) ","// Leaf\naxiom: Y---Y\nrules: \n X => F-FF-F--[--X]F-FF-F--F-FF-F--\n Y => f-F+X+F-fY\n\ndepth: 8\nangle: 60","// Esum\naxiom: X+X+X+X+X+X+X+X\nrules: \n X => [F[-X++Y]]\n Y => [F[-Y--X]]\n F => F\n\ndepth: 6\nangle: -45","// Penrose tiling\naxiom: [N]++[N]++[N]++[N]++[N]\nrules: \n  M => OF++PF----NF[-OF----MF]++\n  N => +OF--PF[---MF--NF]+\n  O => -MF++NF[+++OF++PF]-\n  P => --OF++++MF[+PF++++NF]--NF\n  F => \n\ndepth: 4\nangle: 36\n","// L-System Leaf\naxiom: a\nrules: \n F => >F<\n a => F[+x]Fb\n b => F[-y]Fa\n x => a\n y => b\n\ndepth: 4\nangle: 45","// L-System Bushes 1\naxiom: Y\nrules: \n X => X[-FFF][+FFF]FX\n Y => YFX[+Y][-Y]\n\ndepth: 4\nangle: 25.7","// L-System Bushes 2\naxiom: F\nrules: \n F => FF+[+F-F-F]-[-F+F+F]\n\ndepth: 4\nangle: 22.5","// L-System Bushes 3\naxiom: F\nrules: \n F => F[+FF][-FF]F[-F][+F]F\n\ndepth: 4\nangle: 35","// L-System Bushes (Saupe)\naxiom: VZFFF\nrules: \n V => [+++W][---W]YV\n W => +X[-W]Z\n X => -W[+X]Z\n Y => YZ\n Z => [-FFF][+FFF]F\n\ndepth: 4\nangle: 20","// L-System Bushes (angle-scaled)\naxiom: FX\nrules: \n X => >[-FX]+FX\n\ndepth: 4\nangle: 40","// L-System Sticks\naxiom: X\nrules: \n F => FF\n X => F[+X]F[-X]+X\n\ndepth: 4\nangle: 20","// L-System Algae 1\naxiom: aF\nrules: \n a => FFFFFv[+++h][---q]fb\n b => FFFFFv[+++h][---q]fc\n c => FFFFFv[+++fa]fd\n d => FFFFFv[+++h][---q]fe\n e => FFFFFv[+++h][---q]fg\n g => FFFFFv[---fa]fa\n h => ifFF\n i => fFFF[--m]j\n j => fFFF[--n]k\n k => fFFF[--o]l\n l => fFFF[--p]\n m => fFn\n n => fFo\n o => fFp\n p => fF\n q => rfF\n r => fFFF[++m]s\n s => fFFF[++n]t\n t => fFFF[++o]u\n u => fFFF[++p]\n v => Fv\n\ndepth: 4\nangle: 12","// L-System Algae 2\naxiom: aF\nrules: \n a => FFFFFy[++++n][----t]fb\n b => +FFFFFy[++++n][----t]fc\n c => FFFFFy[++++n][----t]fd\n d => -FFFFFy[++++n][----t]fe\n e => FFFFFy[++++n][----t]fg\n g => FFFFFy[+++fa]fh\n h => FFFFFy[++++n][----t]fi\n i => +FFFFFy[++++n][----t]fj\n j => FFFFFy[++++n][----t]fk\n k => -FFFFFy[++++n][----t]fl\n l => FFFFFy[++++n][----t]fm\n m => FFFFFy[---fa]fa\n n => ofFFF\n o => fFFFp\n p => fFFF[-s]q\n q => fFFF[-s]r\n r => fFFF[-s]\n s => fFfF\n t => ufFFF\n u => fFFFv\n v => fFFF[+s]w\n w => fFFF[+s]x\n x => fFFF[+s]\n y => Fy\n\ndepth: 4\nangle: 12","// L-System Weed\naxiom: F\nrules: \n F => FF-[XY]+[XY]\n X => +FY\n Y => -FX\n\ndepth: 4\nangle: 22.5","// Triangle\naxiom: F+F+F\nrules: \n F => F-F+F\n\ndepth: 4\nangle: 120","// Quadratic Gosper\naxiom: -YF\nrules: \n X => XFX-YF-YF+FX+FX-YF-YFFX+YF+FXFXYF-FX+YF+FXFX+YF-FXYF-YF-FX+FX+YFYF-\n Y => +FXFX-YF-YF+FX+FXYF+FX-YFYF-FX-YF+FXYFYF-FX-YFFX+FX+YF-YF-FX+FX+YFY\n\ndepth: 4\nangle: 90","// Square Sierpinski\naxiom: F+XF+F+XF\nrules: \n X => XF-F+F-XF+F+XF-F+F-X\n\ndepth: 4\nangle: 90","// Crystal\naxiom: F+F+F+F\nrules: \n F => FF+F++F+F\n\ndepth: 4\nangle: 90","// Peano Curve\naxiom: X\nrules: \n X => XFYFX+F+YFXFY-F-XFYFX\n Y => YFXFY-F-XFYFX+F+YFXFY\n\ndepth: 4\nangle: 90","// Quadratic Snowflake\naxiom: F\nrules: \n F => F-F+F+F-F\n\ndepth: 4\nangle: 90","// Quadratic Snowflake\naxiom: FF+FF+FF+FF\nrules: \n F => F+F-F-F+F\n\ndepth: 4\nangle: 90","// Quadratic Koch Island 1\naxiom: F+F+F+F\nrules: \n F => F+F-F-FFF+F+F-F\n\ndepth: 4\nangle: 90","// Quadratic Koch Island 2\naxiom: F+F+F+F\nrules: \n F => F-FF+FF+F+F-F-FF+F+F-F-FF-FF+F\n\ndepth: 4\nangle: 90","// Quadratic Koch Island (Hasan Hosam variation)\naxiom: X+X+X+X+X+X+X+X\nrules: \n X => X+YF++YF-FX--FXFX-YF+X\n Y => -FX+YFYF++YF+FX--FX-YF\n\ndepth: 4\nangle: 45","// Koch Curve\naxiom: F+F+F+F\nrules: \n F => F+F-F-FF+F+F-F\n\ndepth: 4\nangle: 90","// Board\naxiom: F+F+F+F\nrules: \n F => FF+F+F+F+FF\n\ndepth: 4\nangle: 90","// Hilbert\naxiom: X\nrules: \n X => -YF+XFX+FY-\n Y => +XF-YFY-FX+\n\ndepth: 4\nangle: 90","// Sierpinski Arrowhead\naxiom: YF\nrules: \n X => YF+XF+Y\n Y => XF-YF-X\n\ndepth: 4\nangle: 60","// Von Koch Snowflake\naxiom: F++F++F\nrules: \n F => F-F++F-F\n\ndepth: 4\nangle: 60","// Cross\naxiom: F+F+F+F\nrules: \n F => F+FF++F+F\n\ndepth: 4\nangle: 90","// Cross 2\naxiom: F+F+F+F\nrules: \n F => F+F-F+F+F\n\ndepth: 4\nangle: 90","// Pentaplexity\naxiom: F++F++F++F++F\nrules: \n F => F++F++F|F-F++F\n\ndepth: 4\nangle: 36","// Tiles\naxiom: F+F+F+F\nrules: \n F => FF+F-F+F+FF\n\ndepth: 4\nangle: 90","// Rings\naxiom: F+F+F+F\nrules: \n F => FF+F+F+F+F+F-F\n\ndepth: 4\nangle: 90","// Dragon Curve\naxiom: FX\nrules: \n X => X+YF+\n Y => -FX-Y\n\ndepth: 4\nangle: 90","// Hexagonal Gosper\naxiom: XF\nrules: \n X => X+YF++YF-FX--FXFX-YF+\n Y => -FX+YFYF++YF+FX--FX-Y\n\ndepth: 4\nangle: 60","// Lévy curve\naxiom: F\nrules: \n F => -F++F-\n\ndepth: 4\nangle: 45","// Classic Sierpinski Curve\naxiom: F--XF--F--XF\nrules: \n X => XF+F+XF--F--XF+F+X\n\ndepth: 4\nangle: 45","// Krishna Anklets\naxiom: -X--X\nrules: \n X => XFX--XFX\n\ndepth: 4\nangle: 45","// Mango Leaf\naxiom: Y---Y\nrules: \n X => {F-F}{F-F}--[--X]{F-F}{F-F}--{F-F}{F-F}--\n Y => f-F+X+F-fY\n\ndepth: 4\nangle: 60","// Snake Kolam\naxiom: F+XF+F+XF\nrules: \n X => X{F-F-F}+XF+F+X{F-F-F}+X\n\ndepth: 4\nangle: 90","// Kolam\naxiom: (-D--D)\nrules: \n A => F++FFFF--F--FFFF++F++FFFF--F\n B => F--FFFF++F++FFFF--F--FFFF++F\n C => BFA--BFA\n D => CFC--CFC\n\ndepth: 4\nangle: 45"];function V(e){let t={setCode:a,error:null,randomize:r,trueRandomize:o,getExamples:i,loadExample:s,code:j.get("code")},n=-1;return a(t.code),t;function r(){let e;do{e=G(A)}while(e===n);n=e;let r=A[n];return a(r),t.ignoreNextUpdate=!0,t.code=r,n}function o(){let e=Math.floor(5*Math.random())+5,n=O(e),r=Math.floor(4*Math.random())+4,o=z(),i=!0,s=`axiom: X\nrules:\n  X => ${n.X}\n  Y => ${n.Y}\n\ndepth: ${r}\nangle: ${n.angle}`;i&&o.length>0&&(s+="\nactions:",o.forEach((e,t)=>{let n=String.fromCharCode(99+t);s+=`\n  ${n} => setColor('${e}')`})),a(s),t.ignoreNextUpdate=!0,t.code=s}function i(){return A.map((e,t)=>{let n=e.match(/\/\/\s*(.+)/),r=n?n[1].trim():"Example "+(t+1);return{name:r,code:e,index:t}})}function s(e){if(e>=0&&e<A.length){n=e;let r=A[e];a(r),t.ignoreNextUpdate=!0,t.code=r}}function a(n){if(n=n.trim(),n)try{let r=T(n);r?(r.axiom&&(r.start=r.axiom),e.setSystem(r),e.isComplete()?t.error=null:t.error="The system limit reached.\nRendering first 1,000,000 characters",j.set("code",n)):t.error="Could not parse the input string"}catch(r){t.error=r.message}else t.error="Enter a system description above"}}function L(){return"axiom: X\nrules:\n  X => -YF+XFX+FY-\n  Y => +XF-YFY-FX+\n\ndepth: 5\nstepsPerFrame: 10\nwidth: 2\n\nactions:\n  - => rotate(-90)\n  + => rotate(90)\n  F => draw()\n"}function O(e){let t="FXY",n=[],r="";while(n.length<e){let e=a();"+"===e&&"-"===r?e="-":"-"===e&&"+"===r?e="+":"F"===e&&"F"===r&&(e=Math.random()<.5?"X":"Y"),n.push(e),r=e}for(let l of"FXY")n.indexOf(l)<0&&(n[Math.floor(Math.random()*n.length)]=l);let o=n.join(""),i=n.reverse().map(e=>"+"===e?"-":"-"===e?"+":"Y"===e?"X":"X"===e?"Y":e).join(""),s=Math.random()<.5?60:90;return 90===s&&(o.match(/(\+\+|\+-|--)/)||i.match(/(\+\+|\+-|--)/))&&(s=45),{X:o,Y:i,angle:s};function a(){let e=Math.random();return e<.78?(e=Math.random(),t[Math.floor(t.length*e)]):e<.89?"+":e<.95?"-":Math.random()<.5?"+":"-"}}function z(){const e=[["green","lime","lightgreen","darkgreen"],["goldenrod","gold","orange","brown"],["mediumpurple","violet","purple","orchid"],["dodgerblue","skyblue","steelblue","navy"],["coral","salmon","tomato","crimson"],["cyan","turquoise","teal","aquamarine"],["red","blue","green","yellow"],["lightcoral","lightblue","lightgreen","lightyellow"],["sienna","peru","chocolate","saddlebrown"],["hotpink","deeppink","pink","lightpink"]];let t=e[Math.floor(Math.random()*e.length)],n=Math.floor(3*Math.random())+2;return t.slice(0,n)}function G(e){return Math.floor(Math.random()*e.length)}var B=function(){var e=this,t=e._self._c;return t("div",[t("codemirror",{ref:"editor",attrs:{options:{viewportMargin:1/0,theme:"lsystem",mode:"application/lsystem"}},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}}),e.model.error?t("div",{staticClass:"error-container"},[t("pre",{staticClass:"error hl"},[e._v(e._s(e.model.error))])]):e._e()],1)},I=[],N=n("00c7"),W=n.n(N);const q=W()({});var Z=q,D=n("c884"),$=n("56b3");function U(e){e.toggleComment({indent:!0,lineComment:"//"})}function H(e){return K(1,e)}function Q(e){return K(-1,e)}function K(e,t){let n=t.getCursor(),r=t.getTokenAt(n);if(!r||"number"!==r.type)return $.Pass;let o={line:n.line,ch:r.start},i={line:n.line,ch:r.end},s=Number.parseFloat(r.string),a=t.getLine(n.line);o.ch>0&&"-"===a[o.ch-1]&&(s*=-1,o.ch-=1),s+=e;var l=t.getDoc();l.replaceRange(String(s),o,i),Z.fire("immediate-update")}n("7289"),n("cfb0")($);var J={name:"CodeEditor",props:["model"],components:{codemirror:D["codemirror"]},mounted(){Z.on("settings-collapsed",ee,this),Z.on("immediate-update",this.setImmediateUpdate,this),this.$refs.editor.editor.setOption("extraKeys",{"Cmd-/":U,"Ctrl-/":U,"Shift-Up":H,"Shift-Down":Q})},beforeDestroy(){Z.off("settings-collapsed",ee,this),Z.off("immediate-update",this.setImmediateUpdate,this)},watch:{"model.code":function(){if(this.model.ignoreNextUpdate)this.model.ignoreNextUpdate=!1;else{if(this.pendingSetCode&&clearTimeout(this.pendingSetCode),this.isImmediate)return this.model.setCode(this.model.code),void(this.pendingSetCode=0);this.pendingSetCode=setTimeout(()=>{this.model.setCode(this.model.code),this.pendingSetCode=0},300)}}},data(){return{clearImmediate:0,isImmediate:!1}},methods:{setImmediateUpdate(){this.clearImmediate&&clearTimeout(this.clearImmediate),this.clearImmediate=setTimeout(()=>this.isImmediate=!1,30),this.isImmediate=!0}}};function ee(e){e||setTimeout(()=>{this.$refs.editor.editor.refresh()},10)}var te=J,ne=n("2877"),re=Object(ne["a"])(te,B,I,!1,null,null,null),oe=re.exports,ie={name:"App",components:{CodeEditor:oe},data(){return{codeEditorModel:null,sidebarOpen:!0,syntaxHelpVisible:!1,currentExampleIndex:-1,examples:[],isLightTheme:!1,showSaveModal:!1,showSelectionMask:!1,selectionRect:{left:100,top:100,width:400,height:400},isDragging:!1,isResizing:!1,resizeHandle:null,dragStartPos:{x:0,y:0},lineWidth:2,showGrid:!1,rotation:0}},mounted(){const e=document.querySelector("#scene");this.scene=w(e),this.canvas=e;const t=localStorage.getItem("theme");"light"===t&&(this.isLightTheme=!0),this.scene.setTheme(this.isLightTheme),this.updateBodyBackground(),this.codeEditorModel=V(this.scene),this.examples=this.codeEditorModel.getExamples().sort((e,t)=>e.name.localeCompare(t.name)),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)},beforeDestroy(){this.scene.dispose(),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},methods:{toSVGFile(){const e=window.innerWidth,t=window.innerHeight;this.selectionRect={left:e/2-200,top:t/2-200,width:400,height:400},this.showSelectionMask=!0},saveSVGVersion(e){const t=this.isLightTheme,n=this.getCustomViewBox();"light"===e?(this.isLightTheme||(this.scene.setTheme(!0),this.codeEditorModel.setCode(this.codeEditorModel.code)),this.scene.saveToSVG("l-system-light.svg",n),t||setTimeout(()=>{this.scene.setTheme(!1),this.codeEditorModel.setCode(this.codeEditorModel.code)},100)):"dark"===e?(this.isLightTheme&&(this.scene.setTheme(!1),this.codeEditorModel.setCode(this.codeEditorModel.code)),this.scene.saveToSVG("l-system-dark.svg",n),t&&setTimeout(()=>{this.scene.setTheme(!0),this.codeEditorModel.setCode(this.codeEditorModel.code)},100)):"both"===e&&(this.isLightTheme&&(this.scene.setTheme(!1),this.codeEditorModel.setCode(this.codeEditorModel.code)),this.scene.saveToSVG("l-system-dark.svg",n),setTimeout(()=>{this.scene.setTheme(!0),this.codeEditorModel.setCode(this.codeEditorModel.code),this.scene.saveToSVG("l-system-light.svg",n),t||setTimeout(()=>{this.scene.setTheme(!1),this.codeEditorModel.setCode(this.codeEditorModel.code)},100)},200)),this.showSaveModal=!1},getCustomViewBox(){const e=this.scene.getScene(),t=e.getSceneCoordinate(this.selectionRect.left,this.selectionRect.top),n=e.getSceneCoordinate(this.selectionRect.left+this.selectionRect.width,this.selectionRect.top+this.selectionRect.height);return{left:t.x,top:t.y,right:n.x,bottom:n.y}},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},pickFromAlbum(){const e=this.codeEditorModel.randomize();this.currentExampleIndex=e},trueRandomize(){this.codeEditorModel.trueRandomize(),this.currentExampleIndex=-1},loadExample(e){this.currentExampleIndex=e,this.codeEditorModel.loadExample(e)},stopGeneration(){this.scene&&this.scene.stop()},toggleTheme(){this.isLightTheme=!this.isLightTheme,localStorage.setItem("theme",this.isLightTheme?"light":"dark"),this.scene&&(this.scene.setTheme(this.isLightTheme),this.updateBodyBackground(),this.codeEditorModel&&this.codeEditorModel.code&&this.codeEditorModel.setCode(this.codeEditorModel.code))},updateBodyBackground(){document.body.style.backgroundColor=this.isLightTheme?"#ffffff":"#000000"},updateLineWidth(){this.scene&&this.codeEditorModel&&this.codeEditorModel.code&&(this.scene.setLineWidth(this.lineWidth),this.codeEditorModel.setCode(this.codeEditorModel.code))},toggleGrid(){this.scene&&this.scene.setGridVisible(this.showGrid)},updateRotation(){this.canvas&&(this.canvas.style.transform=`rotate(${this.rotation}deg)`)},startDrag(e){this.isDragging=!0,this.dragStartPos={x:e.clientX-this.selectionRect.left,y:e.clientY-this.selectionRect.top}},startResize(e,t){this.isResizing=!0,this.resizeHandle=e,this.dragStartPos={x:t.clientX,y:t.clientY,rect:{...this.selectionRect}}},handleMouseMove(e){if(this.isDragging)this.selectionRect.left=e.clientX-this.dragStartPos.x,this.selectionRect.top=e.clientY-this.dragStartPos.y;else if(this.isResizing){const t=e.clientX-this.dragStartPos.x,n=e.clientY-this.dragStartPos.y,r=this.dragStartPos.rect;switch(this.resizeHandle){case"nw":this.selectionRect.left=r.left+t,this.selectionRect.top=r.top+n,this.selectionRect.width=r.width-t,this.selectionRect.height=r.height-n;break;case"ne":this.selectionRect.top=r.top+n,this.selectionRect.width=r.width+t,this.selectionRect.height=r.height-n;break;case"sw":this.selectionRect.left=r.left+t,this.selectionRect.width=r.width-t,this.selectionRect.height=r.height+n;break;case"se":this.selectionRect.width=r.width+t,this.selectionRect.height=r.height+n;break;case"n":this.selectionRect.top=r.top+n,this.selectionRect.height=r.height-n;break;case"s":this.selectionRect.height=r.height+n;break;case"w":this.selectionRect.left=r.left+t,this.selectionRect.width=r.width-t;break;case"e":this.selectionRect.width=r.width+t;break}this.selectionRect.width<50&&(this.selectionRect.width=50),this.selectionRect.height<50&&(this.selectionRect.height=50)}},handleMouseUp(){this.isDragging=!1,this.isResizing=!1,this.resizeHandle=null},confirmSelection(){this.showSelectionMask=!1,this.showSaveModal=!0},cancelSelection(){this.showSelectionMask=!1}}},se=ie,ae=(n("b6d9"),Object(ne["a"])(se,o,i,!1,null,null,null)),le=ae.exports,ce=function(){var e=this;e._self._c;return e._m(0)},de=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"absolute no-webgl"},[t("h3",[e._v("WebGL is not enabled :(")]),t("p",[e._v(" To render large amount of data fast, this website uses "),t("a",{attrs:{href:"https://get.webgl.org/"}},[e._v("WebGL")]),e._v(", which seem to be not supported by the device that you are using. ")]),t("p",[e._v("Please try a different device to play with this website")])])}],Fe=(n("9be8"),{}),ue=Object(ne["a"])(Fe,ce,de,!1,null,"283309e6",null),he=ue.exports;r["a"].config.productionTip=!1;let me=Object(s["g"])(document.querySelector("#canvas"));new r["a"]({render:e=>e(me?le:he)}).$mount("#app")},"9be8":function(e,t,n){"use strict";n("9fb5")},"9fb5":function(e,t,n){},b6d9:function(e,t,n){"use strict";n("4620")},cfb0:function(e,t){e.exports=function(e){"use strict";e.defineMode("javascript",(function(t,n){var r=t.indentUnit,o=n.statementIndent,i=n.json,s=(n.lsystem,n.typescript),a=n.wordCharacters||/[\w$\xa1-\uffff]/,l=/[a-zA-Z+_^?~<>|&*%\][-]/,c=function(){function e(e){return{type:e,style:"keyword"}}e("keyword a"),e("keyword b"),e("keyword c"),e("keyword d"),e("operator");return{axiom:e("axiom"),angle:e("angle"),start:e("start"),direction:e("direction"),position:e("position"),rules:e("rules"),depth:e("depth"),stepsPerFrame:e("stepsPerFrame"),actions:e("actions"),color:e("color"),width:e("width")}}();let d={test:()=>!1};var F,u,h=d;function m(e){var t,n=!1,r=!1;while(null!=(t=e.next())){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function p(e,t,n){return F=e,u=n,t}function f(e,t){var n=e.next();if('"'==n||"'"==n)return t.tokenize=g(n),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return p("number","number");if("."==n&&e.match(".."))return p("spread","meta");if(/[{}\(\),;\:\.]/.test(n))return p(n);if("="==n&&e.eat(">"))return p("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return p("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),p("number","number");if("/"==n)return e.eat("*")?(t.tokenize=v,v(e,t)):e.eat("/")?(e.skipToEnd(),p("comment","comment")):et(e,t,1)?(m(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2")):(e.eat("="),p("operator","operator",e.current()));if("`"==n)return t.tokenize=w,w(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),p("meta","meta");if("#"==n&&e.eatWhile(a))return p("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->"))return e.skipToEnd(),p("comment","comment");if(h.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?p("."):p("operator","operator",e.current());if(a.test(n)){e.eatWhile(a);var r=e.current();if("."!=t.lastType){if(c.propertyIsEnumerable(r)){var o=c[r];return p(o.type,o.style,r)}if("async"==r&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",r)}return p("variable","variable",r)}if(l.test(n)){var i=e.string.indexOf("=>",e.start);if(i>-1){r=e.current();return p("def","def",r)}}}function g(e){return function(t,n){var r,o=!1;while(null!=(r=t.next())){if(r==e&&!o)break;o=!o&&"\\"==r}return o||(n.tokenize=f),p("string","string")}}function v(e,t){var n,r=!1;while(n=e.next()){if("/"==n&&r){t.tokenize=f;break}r="*"==n}return p("comment","comment")}function w(e,t){var n,r=!1;while(null!=(n=e.next())){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=f;break}r=!r&&"\\"==n}return p("quasi","string-2",e.current())}var b="([{}])";function y(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(s){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var o=0,i=!1,l=n-1;l>=0;--l){var c=e.string.charAt(l),d=b.indexOf(c);if(d>=0&&d<3){if(!o){++l;break}if(0==--o){"("==c&&(i=!0);break}}else if(d>=3&&d<6)++o;else if(a.test(c))i=!0;else if(/["'\/`]/.test(c))for(;;--l){if(0==l)return;var F=e.string.charAt(l-1);if(F==c&&"\\"!=e.string.charAt(l-2)){l--;break}}else if(i&&!o){++l;break}}i&&!o&&(t.fatArrowAt=l)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function X(e,t,n,r,o,i){this.indented=e,this.column=t,this.type=n,this.prev=o,this.info=i,null!=r&&(this.align=r)}function k(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}function C(e,t,n,r,o){var s=e.cc;Y.state=e,Y.stream=o,Y.marked=null,Y.cc=s,Y.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);while(1){var a=s.length?s.pop():i?W:I;if(a(n,r)){while(s.length&&s[s.length-1].lex)s.pop()();return Y.marked?Y.marked:"variable"==n&&k(e,r)?"variable-2":t}}}var Y={state:null,column:null,marked:null,cc:null};function _(){for(var e=arguments.length-1;e>=0;e--)Y.cc.push(arguments[e])}function M(){return _.apply(null,arguments),!0}function S(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function E(e){var t=Y.state;if(Y.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=P(e,t.context);if(null!=r)return void(t.context=r)}else if(!S(e,t.localVars))return void(t.localVars=new j(e,t.localVars));n.globalVars&&!S(e,t.globalVars)&&(t.globalVars=new j(e,t.globalVars))}function P(e,t){if(t){if(t.block){var n=P(e,t.prev);return n?n==t.prev?t:new R(n,t.vars,!0):null}return S(e,t.vars)?t:new R(t.prev,new j(e,t.vars),!1)}return null}function T(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function R(e,t,n){this.prev=e,this.vars=t,this.block=n}function j(e,t){this.name=e,this.next=t}var A=new j("this",new j("arguments",null));function V(){Y.state.context=new R(Y.state.context,Y.state.localVars,!1),Y.state.localVars=A}function L(){Y.state.context=new R(Y.state.context,Y.state.localVars,!0),Y.state.localVars=null}function O(){Y.state.localVars=Y.state.context.vars,Y.state.context=Y.state.context.prev}function z(e,t){var n=function(){var n=Y.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var o=n.lexical;o&&")"==o.type&&o.align;o=o.prev)r=o.indented;n.lexical=new X(r,Y.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function G(){var e=Y.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function B(e){function t(n){return n==e?M():";"==e||"}"==n||")"==n||"]"==n?_():M(t)}return t}function I(e,t){return"var"==e?M(z("vardef",t),ke,B(";"),G):"keyword a"==e?M(z("form"),Z,I,G):"keyword b"==e?M(z("form"),I,G):"keyword d"==e?Y.stream.match(/^\s*$/,!1)?M():M(z("stat"),$,B(";"),G):"debugger"==e?M(B(";")):"{"==e?M(z("}"),L,Fe,G,O):";"==e?M():"if"==e?("else"==Y.state.lexical.info&&Y.state.cc[Y.state.cc.length-1]==G&&Y.state.cc.pop()(),M(z("form"),Z,I,G,Ee)):"function"==e?M(je):"for"==e?M(z("form"),Pe,I,G):"class"==e||s&&"interface"==t?(Y.marked="keyword",M(z("form","class"==e?e:t),ze,G)):"variable"==e?s&&"declare"==t?(Y.marked="keyword",M(I)):s&&("module"==t||"enum"==t||"type"==t)&&Y.stream.match(/^\s*\w/,!1)?(Y.marked="keyword","enum"==t?M(Qe):"type"==t?M(Ve,B("operator"),fe,B(";")):M(z("form"),Ce,B("{"),z("}"),Fe,G,G)):s&&"namespace"==t?(Y.marked="keyword",M(z("form"),W,I,G)):s&&"abstract"==t?(Y.marked="keyword",M(I)):M(z("stat"),oe):"switch"==e?M(z("form"),Z,B("{"),z("}","switch"),L,Fe,G,G,O):"case"==e?M(W,B(":")):"default"==e?M(B(":")):"catch"==e?M(z("form"),V,N,I,G,O):"export"==e?M(z("stat"),Ne,G):"import"==e?M(z("stat"),qe,G):"async"==e?M(I):"@"==t?M(W,I):_(z("stat"),W,B(";"),G)}function N(e){if("("==e)return M(Le,B(")"))}function W(e,t){return D(e,t,!1)}function q(e,t){return D(e,t,!0)}function Z(e){return"("!=e?_():M(z(")"),$,B(")"),G)}function D(e,t,n){if(Y.state.fatArrowAt==Y.stream.start){var r=n?ee:J;if("("==e)return M(V,z(")"),ce(Le,")"),G,B("=>"),r,O);if("variable"==e)return _(V,Ce,B("=>"),r,O)}var o=n?H:U;return x.hasOwnProperty(e)?M(o):"function"==e?M(je,o):"class"==e||s&&"interface"==t?(Y.marked="keyword",M(z("form"),Oe,G)):"keyword c"==e||"async"==e?M(n?q:W):"("==e?M(z(")"),$,B(")"),G,o):"operator"==e||"spread"==e?M(n?q:W):"["==e?M(z("]"),He,G,o):"{"==e?de(se,"}",null,o):"quasi"==e?_(Q,o):"new"==e?M(te(n)):"import"==e?M(W):M()}function $(e){return e.match(/[;\}\)\],]/)?_():_(W)}function U(e,t){return","==e?M($):H(e,t,!1)}function H(e,t,n){var r=0==n?U:H,o=0==n?W:q;return"=>"==e?M(V,n?ee:J,O):"operator"==e?/\+\+|--/.test(t)||s&&"!"==t?M(r):s&&"<"==t&&Y.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(z(">"),ce(fe,">"),G,r):"?"==t?M(W,B(":"),o):M(o):"quasi"==e?_(Q,r):";"!=e?"("==e?de(q,")","call",r):"."==e?M(ie,r):"["==e?M(z("]"),$,B("]"),G,r):s&&"as"==t?(Y.marked="keyword",M(fe,r)):"regexp"==e?(Y.state.lastType=Y.marked="operator",Y.stream.backUp(Y.stream.pos-Y.stream.start-1),M(o)):void 0:void 0}function Q(e,t){return"quasi"!=e?_():"${"!=t.slice(t.length-2)?M(Q):M(W,K)}function K(e){if("}"==e)return Y.marked="string-2",Y.state.tokenize=w,M(Q)}function J(e){return y(Y.stream,Y.state),_("{"==e?I:W)}function ee(e){return y(Y.stream,Y.state),_("{"==e?I:q)}function te(e){return function(t){return"."==t?M(e?re:ne):"variable"==t&&s?M(ye,e?H:U):_(e?q:W)}}function ne(e,t){if("target"==t)return Y.marked="keyword",M(U)}function re(e,t){if("target"==t)return Y.marked="keyword",M(H)}function oe(e){return":"==e?M(G,I):_(U,B(";"),G)}function ie(e){if("variable"==e)return Y.marked="property",M()}function se(e,t){return"async"==e?(Y.marked="property",M(se)):"variable"==e||"keyword"==Y.style?(Y.marked="property","get"==t||"set"==t?M(ae):(s&&Y.state.fatArrowAt==Y.stream.start&&(n=Y.stream.match(/^\s*:\s*/,!1))&&(Y.state.fatArrowAt=Y.stream.pos+n[0].length),M(le))):"number"==e||"string"==e?(Y.marked=Y.style+" property",M(le)):"jsonld-keyword"==e?M(le):s&&T(t)?(Y.marked="keyword",M(se)):"["==e?M(W,ue,B("]"),le):"spread"==e?M(q,le):"*"==t?(Y.marked="keyword",M(se)):":"==e?_(le):void 0;var n}function ae(e){return"variable"!=e?_(le):(Y.marked="property",M(je))}function le(e){return":"==e?M(q):"("==e?_(je):void 0}function ce(e,t,n){function r(o,i){if(n?n.indexOf(o)>-1:","==o){var s=Y.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),M((function(n,r){return n==t||r==t?_():_(e)}),r)}return o==t||i==t?M():n&&n.indexOf(";")>-1?_(e):M(B(t))}return function(n,o){return n==t||o==t?M():_(e,r)}}function de(e,t,n){for(var r=3;r<arguments.length;r++)Y.cc.push(arguments[r]);return M(z(t,n),ce(e,t),G)}function Fe(e){return"}"==e?M():_(I,Fe)}function ue(e,t){if(s){if(":"==e)return M(fe);if("?"==t)return M(ue)}}function he(e,t){if(s&&(":"==e||"in"==t))return M(fe)}function me(e){if(s&&":"==e)return Y.stream.match(/^\s*\w+\s+is\b/,!1)?M(W,pe,fe):M(fe)}function pe(e,t){if("is"==t)return Y.marked="keyword",M()}function fe(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(Y.marked="keyword",M("typeof"==t?q:fe)):"variable"==e||"void"==t?(Y.marked="type",M(be)):"|"==t||"&"==t?M(fe):"string"==e||"number"==e||"atom"==e?M(be):"["==e?M(z("]"),ce(fe,"]",","),G,be):"{"==e?M(z("}"),ce(ve,"}",",;"),G,be):"("==e?M(ce(we,")"),ge,be):"<"==e?M(ce(fe,">"),fe):void 0}function ge(e){if("=>"==e)return M(fe)}function ve(e,t){return"variable"==e||"keyword"==Y.style?(Y.marked="property",M(ve)):"?"==t||"number"==e||"string"==e?M(ve):":"==e?M(fe):"["==e?M(B("variable"),he,B("]"),ve):"("==e?_(Ae,ve):void 0}function we(e,t){return"variable"==e&&Y.stream.match(/^\s*[?:]/,!1)||"?"==t?M(we):":"==e?M(fe):"spread"==e?M(we):_(fe)}function be(e,t){return"<"==t?M(z(">"),ce(fe,">"),G,be):"|"==t||"."==e||"&"==t?M(fe):"["==e?M(fe,B("]"),be):"extends"==t||"implements"==t?(Y.marked="keyword",M(fe)):"?"==t?M(fe,B(":"),fe):void 0}function ye(e,t){if("<"==t)return M(z(">"),ce(fe,">"),G,be)}function xe(){return _(fe,Xe)}function Xe(e,t){if("="==t)return M(fe)}function ke(e,t){return"enum"==t?(Y.marked="keyword",M(Qe)):_(Ce,ue,Me,Se)}function Ce(e,t){return s&&T(t)?(Y.marked="keyword",M(Ce)):"variable"==e?(E(t),M()):"spread"==e?M(Ce):"["==e?de(_e,"]"):"{"==e?de(Ye,"}"):void 0}function Ye(e,t){return"variable"!=e||Y.stream.match(/^\s*:/,!1)?("variable"==e&&(Y.marked="property"),"spread"==e?M(Ce):"}"==e?_():"["==e?M(W,B("]"),B(":"),Ye):M(B(":"),Ce,Me)):(E(t),M(Me))}function _e(){return _(Ce,Me)}function Me(e,t){if("="==t)return M(q)}function Se(e){if(","==e)return M(ke)}function Ee(e,t){if("keyword b"==e&&"else"==t)return M(z("form","else"),I,G)}function Pe(e,t){return"await"==t?M(Pe):"("==e?M(z(")"),Te,G):void 0}function Te(e){return"var"==e?M(ke,Re):"variable"==e?M(Re):_(Re)}function Re(e,t){return")"==e?M():";"==e?M(Re):"in"==t||"of"==t?(Y.marked="keyword",M(W,Re)):_(W,Re)}function je(e,t){return"*"==t?(Y.marked="keyword",M(je)):"variable"==e?(E(t),M(je)):"("==e?M(V,z(")"),ce(Le,")"),G,me,I,O):s&&"<"==t?M(z(">"),ce(xe,">"),G,je):void 0}function Ae(e,t){return"*"==t?(Y.marked="keyword",M(Ae)):"variable"==e?(E(t),M(Ae)):"("==e?M(V,z(")"),ce(Le,")"),G,me,O):s&&"<"==t?M(z(">"),ce(xe,">"),G,Ae):void 0}function Ve(e,t){return"keyword"==e||"variable"==e?(Y.marked="type",M(Ve)):"<"==t?M(z(">"),ce(xe,">"),G):void 0}function Le(e,t){return"@"==t&&M(W,Le),"spread"==e?M(Le):s&&T(t)?(Y.marked="keyword",M(Le)):s&&"this"==e?M(ue,Me):_(Ce,ue,Me)}function Oe(e,t){return"variable"==e?ze(e,t):Ge(e,t)}function ze(e,t){if("variable"==e)return E(t),M(Ge)}function Ge(e,t){return"<"==t?M(z(">"),ce(xe,">"),G,Ge):"extends"==t||"implements"==t||s&&","==e?("implements"==t&&(Y.marked="keyword"),M(s?fe:W,Ge)):"{"==e?M(z("}"),Be,G):void 0}function Be(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||s&&T(t))&&Y.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Y.marked="keyword",M(Be)):"variable"==e||"keyword"==Y.style?(Y.marked="property",M(Ie,Be)):"number"==e||"string"==e?M(Ie,Be):"["==e?M(W,ue,B("]"),Ie,Be):"*"==t?(Y.marked="keyword",M(Be)):s&&"("==e?_(Ae,Be):";"==e||","==e?M(Be):"}"==e?M():"@"==t?M(W,Be):void 0}function Ie(e,t){if("?"==t)return M(Ie);if(":"==e)return M(fe,Me);if("="==t)return M(q);var n=Y.state.lexical.prev,r=n&&"interface"==n.info;return _(r?Ae:je)}function Ne(e,t){return"*"==t?(Y.marked="keyword",M(Ue,B(";"))):"default"==t?(Y.marked="keyword",M(W,B(";"))):"{"==e?M(ce(We,"}"),Ue,B(";")):_(I)}function We(e,t){return"as"==t?(Y.marked="keyword",M(B("variable"))):"variable"==e?_(q,We):void 0}function qe(e){return"string"==e?M():"("==e?_(W):_(Ze,De,Ue)}function Ze(e,t){return"{"==e?de(Ze,"}"):("variable"==e&&E(t),"*"==t&&(Y.marked="keyword"),M($e))}function De(e){if(","==e)return M(Ze,De)}function $e(e,t){if("as"==t)return Y.marked="keyword",M(Ze)}function Ue(e,t){if("from"==t)return Y.marked="keyword",M(W)}function He(e){return"]"==e?M():_(ce(q,"]"))}function Qe(){return _(z("form"),Ce,B("{"),z("}"),ce(Ke,"}"),G,G)}function Ke(){return _(Ce,Me)}function Je(e,t){return"operator"==e.lastType||","==e.lastType||h.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function et(e,t,n){return t.tokenize==f&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return O.lex=!0,G.lex=!0,{startState:function(e){var t={tokenize:f,lastType:"sof",cc:[],lexical:new X((e||0)-r,0,"block",!1),localVars:n.localVars,context:n.localVars&&new R(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),y(e,t)),t.tokenize!=v&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==F?n:(t.lastType="operator"!=F||"++"!=u&&"--"!=u?F:"incdec",C(t,n,F,u,e))},indent:function(t,i){if(t.tokenize==v)return e.Pass;if(t.tokenize!=f)return 0;var s,a=i&&i.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(i))for(var c=t.cc.length-1;c>=0;--c){var d=t.cc[c];if(d==G)l=l.prev;else if(d!=Ee)break}while(("stat"==l.type||"form"==l.type)&&("}"==a||(s=t.cc[t.cc.length-1])&&(s==U||s==H)&&!/^[,\.=+\-*:?[\(]/.test(i)))l=l.prev;o&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var F=l.type,u=a==F;return"vardef"==F?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==F&&"{"==a?l.indented:"form"==F?l.indented+r:"stat"==F?l.indented+(Je(t,i)?o||r:0):"switch"!=l.info||u||0==n.doubleIndentSwitch?l.align?l.column+(u?0:1):l.indented+(u?0:r):l.indented+(/^(?:case|default)\b/.test(i)?r:2*r)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:i?null:"/*",blockCommentEnd:i?null:"*/",blockCommentContinue:i?null:" * ",lineComment:i?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:i?"json":"javascript",jsonldMode:!1,jsonMode:i,expressionAllowed:et,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=W&&t!=q||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/lsystem",{name:"javascript",json:!0,lsystem:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}}});
//# sourceMappingURL=app.f3226219.js.map